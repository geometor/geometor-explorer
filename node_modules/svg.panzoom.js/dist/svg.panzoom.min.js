/*! svg.panzoom.js v1.1.1 MIT*/;!function(){"use strict";var t=function(t){return t.touches||(t.touches=[{clientX:t.clientX,clientY:t.clientY}]),t.touches};SVG.extend(SVG.Doc,SVG.Nested,{panZoom:function(e){if(this.off(".panZoom"),!1===e)return this;e=e||{};var o,n,i=e.zoomFactor||.03,a=e.zoomMin||Number.MIN_VALUE,s=e.zoomMax||Number.MAX_VALUE,c=!1,h=function(t){if(t.preventDefault(),0!=t.deltaY){var e=this.zoom()-i*t.deltaY/Math.abs(t.deltaY),o=this.point(t.clientX,t.clientY);e>s&&(e=s),e<a&&(e=a),this.zoom(e,o)}},r=function(e){n=t(e),n.length<2||(e.preventDefault(),this.fire("pinchZoomStart",{event:e}).event().defaultPrevented||(this.off("touchstart.panZoom",r),c=!0,SVG.on(document,"touchmove.panZoom",m,this,{passive:!1}),SVG.on(document,"touchend.panZoom",u,this,{passive:!1})))},u=function(t){t.preventDefault(),c=!1,this.fire("pinchZoomEnd",{event:t}),SVG.off(document,"touchmove.panZoom",m),SVG.off(document,"touchend.panZoom",u),this.on("touchstart.panZoom",r)},m=function(e){e.preventDefault();var o=t(e),i=this.zoom(),c=Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2)),h=Math.sqrt(Math.pow(o[0].clientX-o[1].clientX,2)+Math.pow(o[0].clientY-o[1].clientY,2)),r=c/h;(i<a&&r>1||i>s&&r<1)&&(r=1);var u={x:o[0].clientX+.5*(o[1].clientX-o[0].clientX),y:o[0].clientY+.5*(o[1].clientY-o[0].clientY)},m={x:n[0].clientX+.5*(n[1].clientX-n[0].clientX),y:n[0].clientY+.5*(n[1].clientY-n[0].clientY)},l=this.point(u.x,u.y),f=this.point(2*u.x-m.x,2*u.y-m.y),p=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(l.x,l.y).scale(r,0,0).translate(-f.x,-f.y));this.viewbox(p),n=o,this.fire("zoom",{box:p,focus:f})},l=function(e){e.preventDefault(),this.off("mousedown.panZoom",l),n=t(e),c||(this.fire("panStart",{event:e}),o={x:n[0].clientX,y:n[0].clientY},SVG.on(document,"mousemove.panZoom",p,this),SVG.on(document,"mouseup.panZoom",f,this))},f=function(t){t.preventDefault(),this.fire("panEnd",{event:t}),SVG.off(document,"mousemove.panZoom",p),SVG.off(document,"mouseup.panZoom",f),this.on("mousedown.panZoom",l)},p=function(e){e.preventDefault();var n=t(e),i={x:n[0].clientX,y:n[0].clientY},a=this.point(i.x,i.y),s=this.point(o.x,o.y),c=[s.x-a.x,s.y-a.y],h=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(c[0],c[1]));this.viewbox(h),o=i};return this.on("wheel.panZoom",h),this.on("touchstart.panZoom",r,this,{passive:!1}),this.on("mousedown.panZoom",l,this),this},zoom:function(t,e){var o=window.getComputedStyle(this.node),n=parseFloat(o.getPropertyValue("width")),i=parseFloat(o.getPropertyValue("height")),a=this.viewbox(),s=n/a.width,c=i/a.height,h=Math.min(s,c);if(null==t)return h;var r=h/t;r===1/0&&(r=Number.MIN_VALUE),e=e||new SVG.Point(n/2/s+a.x,i/2/c+a.y);var u=new SVG.Box(a).transform((new SVG.Matrix).scale(r,e.x,e.y));return this.fire("zoom",{box:u,focus:e}).event().defaultPrevented?this:this.viewbox(u)}}),SVG.extend(SVG.FX,{zoom:function(t,e){return this.add("zoom",[new SVG.Number(t)].concat(e||[]))}})}();